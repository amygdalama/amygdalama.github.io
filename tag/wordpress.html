<!DOCTYPE html>
<html lang="en">
<head>
        <title>Amy Hanlon - wordpress</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
   

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="..">Amy Hanlon </a></h1>
                <nav><ul>
                    <li><a href="..">Home</a></li>
                    <li><a href="../pages/bio.html">Biography</a></li>
                    <li><a href="../pages/contact.html">Contact</a></li>
                </ul></nav>

        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../migrating-to-github-pages-using-pelican.html">Migrating to GitHub Pages using Pelican</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2014-02-22T00:00:00">
                Sat 22 February 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/amy-hanlon.html">Amy Hanlon</a>
        </address>
<p>In <a href="../category/projects.html">Projects</a> </p>


</footer><!-- /.post-info --><p>Over the past week I've been dog-paddling through the ocean of misery that is migrating a blog from one host (WordPress) to another (<a href="http://pages.github.com/">GitHub Pages</a>) and attempting to learn enough CSS and <a href="http://jinja.pocoo.org/">Jinja</a> to handle setting up my site using <a href="http://docs.getpelican.com/en/3.3.0/">Pelican</a>. I have no experience with CSS! And my HTML experience is limited to inserting angst into my MySpace profile! And I became aware of Jinja and Pelican's existence about a week ago! So obviously I've drowned myself in 1.5 bottles of my neighborhood liquor store's 2-bottles-of-wine-for-$10 special.</p>
<p>The great part about this whole process is that with Pelican, I can write my blog posts and pages in <a href="http://daringfireball.net/projects/markdown/">Markdown</a> (about which I also knew little until last week, but it's <em>wonderfully easy to learn</em>.) I am so tired of wrangling with WordPress's built-in editor trying to get my code blocks and in-line code to format correctly. Markdown is a blissful alternative.</p>
<p>There's a plethora of material online on Pelican and GitHub pages, but it is fairly disconnected and presumes a certain level of front-end development experience, of which I have none. Hopefully this post can help others, particularly those without a convenient 2-bottles-for-$10-special, make this transition with less misery.</p>
<h2>GitHub Pages Setup</h2>
<ol>
<li>Create GitHub repo following the <a href="http://pages.github.com/">GitHub Pages instructions</a> (the first step only!)</li>
</ol>
<p><em>A note on GitHub Pages:</em> I believe your HTML files (particularly your index.html file) must be in the <em>main directory</em> of your git repo for this to work. This will be important later. More detail is given in the <strong>Posting to GitHub</strong> section.</p>
<h2>Pelican Setup</h2>
<ol>
<li>
<p>Install necessary <a href="http://docs.getpelican.com/en/3.1.1/getting_started.html#installing-pelican">packages</a></p>
</li>
<li>
<p>Run Pelican <a href="http://docs.getpelican.com/en/3.1.1/getting_started.html#kickstart-a-blog">quickstart</a></p>
<p>This will ask you lots of questions that probably seem foreign. These questions will set up some configuration files that you can later edit with your preferred <a href="http://docs.getpelican.com/en/3.1.1/settings.html">settings</a>. As an example, here's how I answered (I put my responses on separate lines starting with <code>&gt;</code> to make this easier to read):</p>
<div class="highlight"><pre><span class="gp">$</span> pelican-quickstart
<span class="go">Where do you want to create your new web site? [.]  </span>
<span class="gp">&gt;</span>  
<span class="go">What will be the title of this web site?  </span>
<span class="gp">&gt;</span> Amy Hanlon  
<span class="go">Who will be the author of this web site?  </span>
<span class="gp">&gt;</span> Amy Hanlon  
<span class="go">What will be the default language of this web site? [en]  </span>
<span class="gp">&gt;</span> 
<span class="go">Do you want to specify a URL prefix? e.g., http://example.com   (Y/n) </span>
<span class="gp">&gt;</span> y  
<span class="go">What is your URL prefix? (see above example; no trailing slash) </span>
<span class="gp">&gt;</span> http://amygdalama.github.io  
<span class="go">Do you want to enable article pagination? (Y/n) </span>
<span class="gp">&gt;</span> y  
<span class="go">How many articles per page do you want? [10] </span>
<span class="gp">&gt;</span>  
<span class="go">Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) </span>
<span class="gp">&gt;</span> y  
<span class="go">Do you want an auto-reload &amp; simpleHTTP script to assist with theme and site development? (Y/n) </span>
<span class="gp">&gt;</span> y  
<span class="go">Do you want to upload your website using FTP? (y/N) </span>
<span class="gp">&gt;</span> n  
<span class="go">Do you want to upload your website using SSH? (y/N) </span>
<span class="gp">&gt;</span> n  
<span class="go">Do you want to upload your website using Dropbox? (y/N) </span>
<span class="gp">&gt;</span> n  
<span class="go">Do you want to upload your website using S3? (y/N) </span>
<span class="gp">&gt;</span> n  
<span class="go">Do you want to upload your website using Rackspace Cloud Files? (y/N) </span>
<span class="gp">&gt;</span> n
</pre></div>


<p>Now if you type the <code>tree</code> command within your blog's main directory, you should see:</p>
<div class="highlight"><pre><span class="nv">$ </span>tree
.
├── Makefile
├── content
├── develop_server.sh
├── fabfile.py
├── output
├── pelicanconf.py
└── publishconf.py
</pre></div>


<p>If you don't have <code>tree</code>, you should! It's neat. <code>brew install tree</code>. If you're on OSX and don't have <a href="http://brew.sh/">Homebrew</a>, you should! It's neat.</p>
<p>I'll briefly explain each of these files/directories:</p>
<ul>
<li>
<p><code>Makefile</code> tells the command <code>make</code> what to do. This file defines commands like <code>make devserver</code>. More information on <code>make</code> can be found <a href="http://www.gnu.org/software/make/manual/make.html">here</a>. I'll cover more on how to use this command for developing your site in the <strong>Generating Your Site</strong> section.</p>
</li>
<li>
<p><code>content</code> is the directory that should house all of your Markdown files. Pelican assumes that your articles/blog posts will be inside this directory. Additionally, there are some special directories you should create within <code>content</code>:  </p>
<div class="highlight"><pre><span class="nv">$ </span>mkdir content/pages
<span class="nv">$ </span>mkdir content/images
</pre></div>


<p>Pelican by default is configured to know that your pages (i.e. non-temporal pages like About Me, Contact, etc) are found within this <code>pages</code> directory and that images are found within the <code>images</code> directory.  </p>
</li>
<li>
<p><code>develop_server.sh</code> is a bash script that I believe handles serving your site locally during development (i.e. it serves your site to http://localhost:8000).</p>
</li>
<li>
<p><code>fabfile.py</code> is a configuration file for <a href="http://docs.fabfile.org/en/1.8/">Fabric</a> which allows you to generate your site using the <code>fab</code> command. You'll need to <code>pip install fabric</code> if you want to use it. Alternatively you can just use <code>make</code>.</p>
</li>
<li>
<p><code>output</code> is, by default, where Pelican will store your HTML files when you run <code>pelican content</code>. This can cause issues which I describe in the section <strong>Integrating with GitHub</strong>.</p>
</li>
<li>
<p><code>pelicanconf.py</code> houses your Pelican configuration <a href="http://docs.getpelican.com/en/3.3.0/settings.html">settings</a>.</p>
</li>
<li>
<p><code>publishconf.py</code> is like <code>pelicanconf.py</code> in that it houses Pelican configuration settings, but is not intended to be used for local development. The reasoning behind having two separate files is described in <a href="http://stackoverflow.com/a/20845195">this Stack Overflow answer</a>.</p>
</li>
</ul>
</li>
</ol>
<h2>Exporting Existing Content</h2>
<p>This section assumes you have existing content on a WordPress blog. Pelican also has an importer for Dotclear and RSS/Atom feeds. You can skip this section if you don't have existing content living elsewhere that you want to port to your site on GitHub Pages.  </p>
<ol>
<li><a href="http://en.blog.wordpress.com/2006/06/12/xml-import-export/">Export WordPress content to XML</a></li>
<li><a href="http://docs.getpelican.com/en/3.1.1/importer.html">Imperfectly convert the XML to Markdown using Pelican</a></li>
<li>Manually export your images from your WordPress Media Library (I know. This sucks.) Move these images to <code>content/images</code>.</li>
<li>Manually edit the Markdown output (your code blocks, links, embedded images will likely need editing).</li>
<li>Move your Markdown files to the <code>content</code> directory within your website's main directory. Content intended to be non-temporal pages (i.e. About Me, Contact, etc) should go in the <code>content/pages</code> directory. Articles/blog posts should go in the <code>content</code> directory.</li>
</ol>
<h2>Pelican Themes</h2>
<ol>
<li>
<p>Clone the available <a href="https://github.com/getpelican/pelican-themes">Pelican Themes</a> into your blog's main directory.</p>
<div class="highlight"><pre><span class="nv">$ </span>git clone https://github.com/getpelican/pelican-themes
</pre></div>


</li>
<li>
<p>Choose a theme you'd like to use. Pelican by default comes with the notmyidea and simple themes. Most other themes have a sample image in the pelican-themes repo to help you decide.</p>
</li>
<li>
<p>After you've chosen a theme, set the THEME variable in your <code>pelicanconf.py</code> file to the absolute or relative path to the theme. For example, I'm using the subtle theme and added this line to my <code>pelicanconf.py</code> file:</p>
<div class="highlight"><pre><span class="n">THEME</span> <span class="o">=</span> <span class="s">&quot;pelican-themes/subtle&quot;</span>
</pre></div>


<p>I recommend using an absolute or relative path to the theme, rather than using <code>pelican-themes --install subtle</code>. This ensures that Pelican HTML output will reflect any changes you make to the theme.</p>
</li>
</ol>
<h2>Customization</h2>
<p>All elements of your theme are customizable! You can change attributes of text like font, size, color, and more in the <code>main.css</code> file found in your theme's directory. For example, I've made many edits to the file <code>pelican-themes/subtle/static/css/main.css</code>.</p>
<p>Similarly, you can change layouts of your pages (like what shows up in your site nav menu) by exploring the HTML files in the <code>templates</code> folder within your theme. There will usually be a <code>base.html</code> file (or something similar) that provides the foundation for things like your header and site nav menu that will apply to every page. </p>
<p>There should also be HTML files that serve as templates for specific types of pages. For example, <code>article.html</code> defines the basic structure for your articles/blog posts. If you want to change whether the author, date, tags, etc, display above article content, you should look there.</p>
<p>If you see something on your website that you want to change, and you're not sure where to look in your theme's CSS/HTML files, right click on the element in the browser and go to "Inspect Element". This will show you where in the HTML the element is (on the left) and what parts of the CSS file define its style (on the right). You can adjust things here in the browser to test out different fonts, colors, etc, but note that changes you make to the code in your browser will not be reflected in your source files.</p>
<h2>Generating Your Site</h2>
<p>Once you have markdown files in your <code>content</code> folder, you can run <code>make devserver</code>, which does a number of things: it runs the <code>pelican</code> command on your <code>content</code> folder to generate HTML for your site using the theme you specify in your <code>pelicanconf.py</code> file, and serves your site locally at <a href="http://localhost:8000">http://localhost:8000</a>. <code>make devserver</code> will also automatically regenerate your site every time you save a change to a content, configuration, or theme file! Just refresh the page in your browser, and you should immediately see the changes.</p>
<h2>Posting to GitHub</h2>
<p>Recall that you need a repository on GitHub named <em>username.github.io</em> (this will be the remote repository for your blog), and that your HTML files need to be in this repository's main directory (not within a subdirectory).</p>
<p>It's intuitive to initialize a local repository for your blog within your blog's main directory, because in addition to posting the HTML, you'd also like to backup your content Markdown files, configuration files, and customized theme. This is a reasonable desire!</p>
<p>However, if you do this, GitHub won't generate your site! It isn't smart enough to know that the HTML files it needs to serve are actually contained within the <code>output</code> folder (recall that Pelican by default saves the HTML it generates in this folder).</p>
<p>There seem to be two solutions for this problem:</p>
<ol>
<li>Create two separate repositories - one inside the <code>output</code> directory where Pelican generates your HTML (this repo should have <em>username.github.io</em> on GitHub as a remote), and another in your blog's main directory with your source Markdown files (in <code>content</code>), theme, and configuration files (this repo should have a different remote on GitHub).</li>
<li>
<p>Create a single repository in your blog's main directory that houses everything (this repo should have <em>username.github.io</em> on GitHub as a remote), and edit Pelican's settings to create output in your blog's main directory rather than within the <code>output</code> subdirectory.</p>
<p>To change Pelican's output settings, you'll need to edit these files:  </p>
<ul>
<li>
<p><code>pelicanconf.py</code> - change your <code>OUTPUT</code> settings variable</p>
<div class="highlight"><pre><span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="s">&#39;.&#39;</span>
</pre></div>


</li>
<li>
<p><code>publishconf.py</code> - change your <code>DELETE_OUTPUT_DIRECTORY</code> variable</p>
<div class="highlight"><pre><span class="n">DELETE_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>


</li>
<li>
<p><code>Makefile</code> and <code>develop_server.sh</code>- change your <code>OUTPUTDIR</code></p>
<div class="highlight"><pre><span class="nv">OUTPUTDIR</span><span class="o">=</span><span class="k">$(</span>BASEDIR<span class="k">)</span>
</pre></div>


</li>
</ul>
<p>I decided to go with this option, but <strong>DANGER!</strong> If you go with #2, <strong><em>do not use the command <code>make clean</code></em></strong>! It will delete everything in your blog's main directory! To make super sure this command never gets executed, you can comment out its definition in your <code>Makefile</code>:</p>
<div class="highlight"><pre><span class="c"># clean:</span>
<span class="c">#   [ ! -d $(OUTPUTDIR) ] || rm -rf $(OUTPUTDIR)</span>
</pre></div>


</li>
</ol>
<p>If you know of a more elegant solution to this problem, please email me!</p>
<p>In the terminal, move to the directory you're choosing to house your git repo (either the <code>output</code> directory or your blog's main directory), and initialize a git repo. Add a remote pointing to the repo you created on GitHub (called <em>username.github.io</em>), add all the files you want to commit, commit, and push changes to the remote repository.</p>
<div class="highlight"><pre><span class="nv">$ </span>git init
<span class="nv">$ </span>git remote add origin https://github.com/username/username.github.io.git
<span class="nv">$ </span>git add --all
<span class="nv">$ </span>git commit -m <span class="s2">&quot;commit message&quot;</span>
<span class="nv">$ </span>git push origin master
</pre></div>


<p>If you're going with option #1, you'll also need to set up another repository for your content, configuration files, and theme.</p>
<p>Within about 10 minutes of pushing your changes, your site should be up and running! (Later changes should be reflected on your site almost instantaneously.)</p>
<h2>Custom Domain Setup</h2>
<p>If you have your own domain name that you'd like to use instead of <em>username.github.io</em>, you'll need to follow <a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">these instructions</a>.</p>
<h2>Fin</h2>
<p>Feel free to poke around my blog's <a href="https://github.com/amygdalama/amygdalama.github.io">GitHub repo</a> (beware: there are unpublished draft posts in there). My configuration files in particular might be useful to you.</p>
<p>If any of you Hacker Schoolers have trouble migrating your blog, I'd be happy to help!</p>
                    <p>    <!-- <p> -->
        tags: 
           <a href="../tag/pelican.html">pelican</a>
           <a href="../tag/blogging.html">blogging</a>
           <a href="../tag/wordpress.html">wordpress</a>
           <a href="../tag/github-pages.html">github-pages</a>
           <a href="../tag/markdown.html">markdown</a>
    <!-- </p> -->
    
</p>
                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

</body>
</html>