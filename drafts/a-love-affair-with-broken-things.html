<!DOCTYPE html>
<html lang="en">
<head>
        <title>A Love Affair With Broken Things, Plus Some Functional Programming</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
   

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="..">Amy Hanlon </a></h1>
                <nav><ul>
                    <li><a href="..">Home</a></li>
                    <li><a href="../pages/bio.html">Biography</a></li>
                    <li><a href="../pages/contact.html">Contact</a></li>
                    <li><a href="../pages/projects.html">Projects</a></li>
                    <li><a href="../pages/talks.html">Talks</a></li>
                </ul></nav>

        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="a-love-affair-with-broken-things.html" rel="bookmark"
           title="Permalink to A Love Affair With Broken Things, Plus Some Functional Programming">A Love Affair With Broken Things, Plus Some Functional Programming</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-29T00:00:00">
                Sat 29 March 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/amy-hanlon.html">Amy Hanlon</a>
        </address>
<p><!-- In <a href="../category/projects.html">Projects</a>  --></p>


</footer><!-- /.post-info -->      <p>I love broken things, unfinished things, breaking things, unfinishing things. Broken and unfinished things allow you to see the process in which they were created; their most intimate secrets are exposed.</p>
<h2>Broken Statues</h2>
<p>A week ago, inside <a href="http://www.metmuseum.org/en">The Metropolitan Museum of Art</a>, my love for broken things was realized. Just <em>look</em> at these. They're so <em>naked, vulnerable</em>.</p>
<p><img alt="some ladies, broken" src="/images/broken_ladies.JPG" title="broken ladies" />
<img alt="a face, broken" src="/images/broken_face.JPG" title="broken face" />
<img alt="a torso, broken" src="/images/broken_torso.JPG" title="broken torso" /></p>
<p>Okay so some of them are literally naked, but you get the point. When a statue is broken, you can sneak a peek inside! You get so many clues about how it was made! Is it hollow? What's it made out of? Is the material on the outside the same as the inside? Does it have a frame?</p>
<h2>Breaking Code</h2>
<p>While I can't bring myself to break art to get clues about the process of its creation, I <em>can</em> break code! Breaking code is free and doesn't hurt anyone! I do this quite a bit as a method of learning - removing the pieces of code that you don't understand reveals the purpose of those pieces. It's like removing the arm of a statue to look inside.</p>
<p>Let's look at some code from Mary Rose Cook's functional programming <a href="http://maryrosecook.com/blog/post/a-practical-introduction-to-functional-programming">tutorial</a> (which is amazing, and you should absolutely read it and do the exercises and spend time understanding it completely if you're at all interested in functional programming). We won't understand the code at first (or at least <em>I</em> won't), but we'll take apart the pieces of the code in attempt to understand their purpose better.</p>
<p>Mary aptly explains what Python's builtin <code>map</code> function does:</p>
<blockquote>
<p>Map takes a function and a collection of items. It makes a new, empty collection, runs the function on each item in the original collection and inserts each return value into the new collection. It returns the new collection.</p>
</blockquote>
<p>Her first example for showing how <code>map</code> works is fairly straightforward:</p>
<blockquote>
<p>This is a simple map that takes a list of names and returns a list of the lengths of those names:</p>
<div class="highlight"><pre><span class="n">name_lengths</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;Mary&quot;</span><span class="p">,</span> <span class="s">&quot;Isla&quot;</span><span class="p">,</span> <span class="s">&quot;Sam&quot;</span><span class="p">])</span>
<span class="n">print</span> <span class="n">name_lengths</span>
<span class="cp"># =&gt; [4, 4, 3]</span>
</pre></div>


</blockquote>
<p>In the second example of <code>map</code>, we see that Mary uses a <code>lambda</code> function: </p>
<blockquote>
<p>This is a map that squares every number in the passed collection:</p>
<div class="highlight"><pre><span class="n">squares</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">lambda</span> <span class="n">x</span><span class="o">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">print</span> <span class="n">squares</span>
<span class="cp"># =&gt; [0, 1, 4, 9, 16]</span>
</pre></div>


</blockquote>
<p>Why do we need a <code>lambda</code> function here? To understand, let's try removing it:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="kt">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">,</span> <span class="err">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="cp">]</span>)
Traceback (most recent call last):
  File &quot;<span class="nt">&lt;stdin&gt;</span>&quot;, line 1, in <span class="nt">&lt;module&gt;</span>
NameError: name &#39;x&#39; is not defined
</pre></div>


<p>Okay. <code>x</code> is not defined. That makes sense, because <code>x</code> isn't in our <code>locals</code> or our <code>globals</code> or our <code>builtins</code>.</p>
<p>What if we tried using the <code>**</code> operator? Can we pass something like <code>** 2</code> or <code>+ 2</code> as the function for <code>map</code>? Let's try:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="kt">map</span><span class="p">(</span><span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="err">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="cp">]</span>)
  File &quot;<span class="nt">&lt;stdin&gt;</span>&quot;, line 1
    squares = map(** 2, <span class="cp">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="cp">]</span>)
                      ^
SyntaxError: invalid syntax
</pre></div>


<p><code>SyntaxError</code>. This makes me think that <code>**</code> is part of a statement, defined in Python's Grammar file, and the way that we've typed our code is in violation of the the definition of that statement. So, let's look in the <a href="http://docs.python.org/2/reference/grammar.html">Grammar file</a>. We're not afraid to look at the Grammar file.</p>
<p>Searching for "**" in the Grammar, we find the line:</p>
<div class="highlight"><pre><span class="n">power</span><span class="o">:</span> <span class="n">atom</span> <span class="n">trailer</span><span class="o">*</span> <span class="o">[</span><span class="s1">&#39;**&#39;</span> <span class="n">factor</span><span class="o">]</span>
</pre></div>


<p>Since we've read Allison Kaptur's <a href="http://akaptur.github.io/blog/2014/03/16/reading-ebnf/">post</a> on reading EBNF, the language in which Python's Grammar file is written, we know how to read this statement. Translating to English: a <code>power</code> statement consists of an <code>atom</code>, followed by zero or more <code>trailer</code>s, optionally followed by the literal string <code>'**'</code> and a <code>factor</code>.</p>
<p>I have no clue what an <code>atom</code>, <code>trailer</code>, or <code>factor</code> is, so let's look those up.</p>
<div class="highlight"><pre><span class="nl">atom:</span> <span class="p">(</span><span class="sc">&#39;(&#39;</span> <span class="p">[</span><span class="n">yield_expr</span><span class="o">|</span><span class="n">testlist_comp</span><span class="p">]</span> <span class="sc">&#39;)&#39;</span> <span class="o">|</span>
   <span class="sc">&#39;[&#39;</span> <span class="p">[</span><span class="n">listmaker</span><span class="p">]</span> <span class="sc">&#39;]&#39;</span> <span class="o">|</span>
   <span class="sc">&#39;{&#39;</span> <span class="p">[</span><span class="n">dictorsetmaker</span><span class="p">]</span> <span class="sc">&#39;}&#39;</span> <span class="o">|</span>
   <span class="sc">&#39;`&#39;</span> <span class="n">testlist1</span> <span class="sc">&#39;`&#39;</span> <span class="o">|</span>
   <span class="n">NAME</span> <span class="o">|</span> <span class="n">NUMBER</span> <span class="o">|</span> <span class="n">STRING</span><span class="o">+</span><span class="p">)</span>

<span class="nl">trailer:</span> <span class="sc">&#39;(&#39;</span> <span class="p">[</span><span class="n">arglist</span><span class="p">]</span> <span class="sc">&#39;)&#39;</span> <span class="o">|</span> <span class="sc">&#39;[&#39;</span> <span class="n">subscriptlist</span> <span class="sc">&#39;]&#39;</span> <span class="o">|</span> <span class="sc">&#39;.&#39;</span> <span class="n">NAME</span>

<span class="nl">factor:</span> <span class="p">(</span><span class="sc">&#39;+&#39;</span><span class="o">|</span><span class="sc">&#39;-&#39;</span><span class="o">|</span><span class="sc">&#39;~&#39;</span><span class="p">)</span> <span class="n">factor</span> <span class="o">|</span> <span class="n">power</span>
</pre></div>


<p>And now I feel like an ouroboros. What does this mean. </p>
<p>Let's try another approach. How about we <a href="https://www.google.com/search?q=python+grammar+power+statement&amp;oq=python+grammar+power+statement&amp;aqs=chrome..69i57.7035j1j4&amp;sourceid=chrome&amp;espv=210&amp;es_sm=91&amp;ie=UTF-8#q=python+grammar+power+operator">google "python grammar power operator"</a>. The first result is this nice <a href="https://docs.python.org/2/reference/expressions.html">Python documentation on Expressions</a>:</p>
<div class="highlight"><pre><span class="n">power</span> <span class="o">::=</span>  <span class="n">primary</span> <span class="p">[</span><span class="s">&quot;**&quot;</span> <span class="n">u_expr</span><span class="p">]</span>
</pre></div>


<p>So <code>power</code> consists of a <code>primary</code> followed by optionally the literal string '**' and a <code>u_expr</code>. This seems </p>
<p>But now I'm confused. What's the difference between a Python <em>statement</em> and a Python <em>expression</em>? Well, there's a <a href="http://stackoverflow.com/a/4728147">StackOverflow answer</a> for that.</p>
      <p>
    <!-- <p> -->
        tags: 
           <a href="../tag/learning.html">learning</a>
           <a href="../tag/hacker-school.html">hacker school</a>
           <a href="../tag/python.html">python</a>
           <a href="../tag/functional-programming.html">functional programming</a>
    <!-- </p> -->
    
      </p>
    </div><!-- /.entry-content -->
    <br>
    <div class="comments">
      <h2 class = "other-articles">Comments</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "a-love-affair-with-broken-things.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://mathamy.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-48330831-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
<script type="text/javascript">
    var disqus_shortname = 'mathamy';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>