<!DOCTYPE html>
<html lang="en">
<head>
        <title>Phonebook Exercise</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
   

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="..">Amy Hanlon </a></h1>
                <nav><ul>
                    <li><a href="..">Home</a></li>
                    <li><a href="../pages/about.html">About</a></li>
                    <li><a href="../pages/contact.html">Contact</a></li>
                    <li><a href="../pages/projects.html">Projects</a></li>
                    <li><a href="../pages/talks.html">Talks</a></li>
                </ul></nav>

        </header><!-- /#banner -->
        
<section id="content" class="body">    
    <h1 class="page-title">Phonebook Exercise</h1>
    <p>Let's make a command line tool for managing phonebook entries!</p>
<h1 id="introduction">Introduction</h1>
<p>This exercise is organized in a few sections:</p>
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#1-specifications">1. Specifications</a></li>
<li><a href="#2-code-skeleton">2. Code Skeleton</a><ul>
<li><a href="#21-the-__name__-variable">2.1 The __name__ Variable</a></li>
</ul>
</li>
<li><a href="#3-argument-parsing">3. Argument parsing</a><ul>
<li><a href="#31-accessing-arguments">3.1 Accessing Arguments</a></li>
<li><a href="#32-parsing-arguments">3.2 Parsing Arguments</a></li>
<li><a href="#33-unpacking-arguments">3.3 Unpacking Arguments</a></li>
<li><a href="#34-handling-bad-arguments">3.4 Handling Bad Arguments</a></li>
<li><a href="#35-mapping-commands-to-functions">*3.5 Mapping commands to functions</a></li>
</ul>
</li>
<li><a href="#4-raising-exceptions">4. Raising Exceptions</a><ul>
<li><a href="#41-invalid-number-of-arguments">4.1 Invalid number of arguments</a></li>
</ul>
</li>
<li><a href="#5-writing-tests">5. Writing Tests</a></li>
<li><a href="#6-data-storage">6. Data Storage</a></li>
<li><a href="#7-partial-string-matching">7. Partial String Matching</a><ul>
<li><a href="#71-string-methods">7.1 string Methods</a><ul>
<li><a href="#711-matching-partial-names">7.1.1 Matching Partial Names</a></li>
<li><a href="#712-validating-phone-numbers">7.1.2 Validating Phone Numbers</a></li>
</ul>
</li>
<li><a href="#72-regular-expressions">*7.2 Regular Expressions</a><ul>
<li><a href="#721-matching-partial-names">*7.2.1 Matching Partial Names</a></li>
<li><a href="#722-validating-phone-numbers">*7.2.2 Validating Phone Numbers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#8-further-reading">8. Further Reading</a></li>
<li><a href="#appendix">Appendix</a><ul>
<li><a href="#subclasses-possible">Subclasses (possible)</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
</li>
</ul>
</div>
<p>Depending on your learning style and experience level, you might get through all of these sections. Or you might just get through the first one. That's okay! The main priority for this exercise is to write a lot of code and understand what the code you're writing does. Don't worry about "finishing", whatever that means.</p>
<p>If you don't understand a phrase or a line of code that I use, ask me! I can show you what I'd do to figure out what the line of code means. Learning how to figure out the things you don't know is an important skill in programming.</p>
<p>The more challenging sections are marked with an asterisk (*). If you find the sections without askerisks challenging, I recommend skipping the more challenging ones for now. You can come back to them later if you're curious.</p>
<p>On the other hand, if you have a good idea for how to do the things outlined in a section, try doing it without reading through the section first, and just use the tutorial for reference if you get stuck.</p>
<h1 id="1-specifications">1. Specifications</h1>
<p>We'll write a Python program that will support creating, retrieving, updating, and deleting phonebook entries consisting of a name and a phone number.</p>
<p>The program will have a command line interface supporting the following commands and behaviors:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create ex_phonebook
<span class="go">Created phonebook &#39;ex_phonebook.pb&#39; in the current directory.</span>

<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;432 123 4321&#39;</span> ex_phonebook
<span class="go">Added an entry to ex_phonebook.pb:</span>
<span class="go">Jane Doe    432 123 4321</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;509 123 4567&#39;</span> ex_phonebook
<span class="go">Added an entry to ex_phonebook.pb:</span>
<span class="go">Jane Lin    509 123 4567</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Error: Jane Lin already exists in ex_phonebook. Use the &#39;update&#39; command to change this entry.</span>

<span class="gp">$</span> python phonebook.py update <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Updated an entry in ex_phonebook.pb.</span>
<span class="go">Previous entry:</span>
<span class="go">Jane Lin    509 123 4567</span>
<span class="go">New entry:</span>
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane&#39;</span> ex_phonebook
<span class="go">Jane Doe    432 123 4321</span>
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py reverse-lookup <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py remove <span class="s1">&#39;Jane Doe&#39;</span> ex_phonebook
<span class="go">Removed an entry from ex_phonebook.pb:</span>
<span class="go">Jane Doe    432 123 4321</span>
<span class="gp">$</span> python phonebook.py remove <span class="s1">&#39;John Doe&#39;</span> ex_phonebook
<span class="go">Error: &#39;John Doe&#39; does not exist in ex_phonebook.pb</span>
</pre></div>


<h1 id="2-code-skeleton">2. Code Skeleton</h1>
<p>What are the functions that you'll need for your program? What arguments will each of those functions need? Write a skeleton program that has those functions definitions, but where the functions just <code>pass</code>, rather than actually doing anything.</p>
<p>Here is an example skeleton program with function definitions for <code>create</code>ing a phonebook and <code>add</code>ing an entry to the phonebook. You'll need more functions, too, but this is a start:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>


<p>Similarly, create functions for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<h2 id="21-the-__name__-variable">2.1 The <code>__name__</code> Variable</h2>
<p>Why do I have <code>if __name__ == '__main__':</code> in the above code snippet?</p>
<p>Suppose someone (maybe you) wanted to <code>import</code> this <code>phonebook.py</code> script into another program. Maybe you want to do this so you could write tests for the program (which we'll cover later), or because you wanted to make a web front-end to the program. You would probably want some code that executes only if the script is executed directly (e.g. by calling <code>python phonebook.py</code> on the command line) that is <em>not</em> executed when you <code>import</code> the script into another Python program.</p>
<p>This is exactly what the <code>if __name__ == '__main__'</code> code block is for. <code>__name__</code> is a variable whose value will be <code>__main__</code> if the script was executed directly (e.g. by <code>python phonebook.py</code>) and otherwise will be the name of the module, (e.g. <code>phonebook</code>).</p>
<p>To make this a bit more concrete, let's make a couple example scripts:</p>
<p><code>a.py</code>:</p>
<div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;__name__: &quot;</span><span class="p">,</span> <span class="n">__name__</span>
</pre></div>


<p><code>b.py</code>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">a</span>
</pre></div>


<p>Now let's execute each of these scripts and see what happens.</p>
<div class="highlight"><pre><span class="gp">$</span> python a.py
<span class="go">__name__:  __main__</span>
</pre></div>


<p><code>a.py</code> is fairly straightforward -- we execute the <code>print</code> statement, and we see that the value of the variable <code>__name__</code> is the string <code>'__main__'</code>. <code>__name__</code> is a variable that is defined for us automatically in every Python program, and if the program was executed directly, its value is the string <code>'__main__'</code>. Great.</p>
<p>Now let's execute <code>b.py</code>:</p>
<div class="highlight"><pre><span class="gp">$</span> python b.py
<span class="go">__name__:  a</span>
</pre></div>


<p><code>b.py</code> is a bit less straightforward. Here we <code>import a</code>, which <em>executes the code that is inside <code>a.py</code></em>. This also adds the variables defined in <code>a</code> to our namespace. I'll give a basic overview of what <code>import</code> does in the next section.</p>
<p>So the value of <code>__name__</code> inside <code>a</code> in this context is the string <code>'a'</code>, rather than <code>'__main__'</code>. This is because the code is being executed by result of an <code>import</code> statement, rather than being executed directly.</p>
<p>How could we execute different code when we <code>import</code> a script than when we execute the script directly? This is where the <code>if __name__ == '__main__'</code> part comes into play. Let's make two more example scripts to explore this.</p>
<p><code>c.py</code>:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;c.py was executed directly&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;c.py was imported&quot;</span>
</pre></div>


<p><code>d.py</code>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">c</span>
</pre></div>


<p>And let's execute each of these scripts to see what happens:</p>
<div class="highlight"><pre><span class="gp">$</span> python c.py
<span class="go">c.py was executed directly</span>

<span class="gp">$</span> python d.py
<span class="go">c.py was imported</span>
</pre></div>


<p>Viola! So that's what the <code>if __name__ == '__main__'</code> statement does. We'll be adding some code that we don't want to execute when we <code>import phonebook</code> into this code block.</p>
<h1 id="3-argument-parsing">3. Argument parsing</h1>
<p>If you don't know how to parse arguments passed to the Python interpreter from the command line, see if you can figure out how to do it by googling. Maybe google "python command line arguments" as a start.</p>
<h2 id="31-accessing-arguments">3.1 Accessing Arguments</h2>
<p>Arguments passed to Python scripts from the command line are accessible using the <code>sys</code> module. Here's a simple example script that prints out the arguments passed to the Python interpreter:</p>
<div class="highlight"><pre><span class="c"># ex.py</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">print</span> <span class="s">&quot;The arguments given to the interpreter are:&quot;</span>
<span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
</pre></div>


<p>What happens when you execute the script giving it some arguments?</p>
<div class="highlight"><pre><span class="gp">$</span> python ex.py cats dragons frogs
<span class="go">The arguments given to the interpreter are:</span>
<span class="go">[&#39;ex.py&#39;, &#39;cats&#39;, &#39;dragons&#39;, &#39;frogs&#39;]</span>
</pre></div>


<p>So <code>sys.argv</code> is a list, containing the name of the script (<code>'ex.py'</code>), and then the three arguments we passed, all represented as strings.</p>
<h2 id="32-parsing-arguments">3.2 Parsing Arguments</h2>
<p>For your phonebook application, you might choose to manually parse your arguments. For the first two commands, <code>create</code> and <code>add</code>, your code would look something like this:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="c"># include functions for other arguments</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    <span class="c"># name of script is first arg</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># the next arg will be the main command</span>

    <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;add&#39;</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">)</span>
</pre></div>


<p>Similarly, define <code>elif</code> statements for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<p>If you're not sure how the <code>pop</code> method works, google it!</p>
<p>There are some potential issues with this code. Try to figure out what they are. Try to improve the code.</p>
<h2 id="33-unpacking-arguments">3.3 Unpacking Arguments</h2>
<p>List unpacking can make our code naming the variables in each of the <code>if</code>/<code>elif</code> blocks much cleaner.</p>
<p>For example, we can turn this:</p>
<div class="highlight"><pre><span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">number</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>


<p>into this:</p>
<div class="highlight"><pre><span class="n">name</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="n">args</span>
</pre></div>


<p>This takes the first element in <code>args</code> and assigns it to the variable <code>name</code>, and the second element in <code>args</code> and assigns it to the variable <code>number</code>.</p>
<p>Edit the code for each of your commands to use list unpacking everywhere you have multiple lines with <code>pop</code> in a row.</p>
<p>An example for the <code>add</code> and <code>create</code> commands would look like this:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="c"># include functions for other arguments</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    <span class="c"># name of script is first arg</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># the next arg will be the main command</span>

    <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;add&#39;</span><span class="p">:</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">)</span>
</pre></div>


<p>We left the <code>pop</code> line for the <code>create</code> command since there should be only one argument left. What happens if you try to unpack a list with only one element? Try figuring it out in your REPL.</p>
<p>Similarly, define <code>elif</code> statements for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<h2 id="34-handling-bad-arguments">3.4 Handling Bad Arguments</h2>
<p>What happens if your program is given arguments that aren't supported? For example, try typing:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py cats
</pre></div>


<p>What about if you try <code>add</code>ing a phone number, but you only give it a name, and not a number?</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span>
</pre></div>


<p>What about if you give it a name, number, and an extra nonsensical argument?</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;765-344-3421&#39;</span> <span class="s1">&#39;cats&#39;</span>
</pre></div>


<p>It would be helpful to print out an error message for situations like this.</p>
<h2 id="35-mapping-commands-to-functions">*3.5 Mapping commands to functions</h2>
<p>This section is a bit more advanced than the others. If you've found the previous sections difficult, you might want to skip this one and come back to it later.</p>
<p>Having an <code>if</code>/<code>elif</code> statement for each command is kind of ugly. Instead, try creating a dictionary mapping the commands to their corresponding functions, like this:</p>
<div class="highlight"><pre><span class="n">command_funcs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;create&#39;</span> <span class="p">:</span> <span class="n">create</span><span class="p">,</span>  <span class="c"># create is a function defined elsewhere</span>
    <span class="s">&#39;add&#39;</span> <span class="p">:</span> <span class="n">add</span><span class="p">,</span>
    <span class="s">&#39;update&#39;</span> <span class="p">:</span> <span class="n">update</span><span class="p">,</span>
    <span class="s">&#39;delete&#39;</span> <span class="p">:</span> <span class="n">delete</span><span class="p">,</span>
    <span class="s">&#39;lookup&#39;</span> <span class="p">:</span> <span class="n">lookup</span><span class="p">,</span>
    <span class="s">&#39;reverse-lookup&#39;</span> <span class="p">:</span> <span class="n">reverse_lookup</span>
<span class="p">}</span>
</pre></div>


<p>Having functions as values in a dictionary might be pretty foreign at first, but it can be really useful, as we're about to see!</p>
<p>We can look up the appropriate function for the given command like this:</p>
<div class="highlight"><pre><span class="n">func</span> <span class="o">=</span> <span class="n">command_funcs</span><span class="p">[</span><span class="n">command</span><span class="p">]</span>
</pre></div>


<p>Here the variable <code>command</code> is the main command you grabbed from the command line arguments. <code>func</code> is the function associated with <code>command</code> in the <code>command_funcs</code> dictionary we created.</p>
<p>To invoke <code>func</code>, we could try:</p>
<div class="highlight"><pre><span class="n">func</span><span class="p">()</span>
</pre></div>


<p>But we need to figure out how to pass the appropriate arguments to <code>func</code>. <code>func</code> could be any of <code>create</code>, <code>add</code>, <code>update</code>, <code>delete</code>, etc. These functions take varying number of arguments. So how can we pass the correct number of arguments to <code>func</code> without a messy <code>if</code> statement?</p>
<p>This is where the super awesome <code>*args</code> comes in handy. Try reading up on <code>*args</code>. Then try figuring out how to use it to pass <code>func</code> the rest of the arguments that were given on the command line. Try to figure out how to handle when an incorrect number of arguments is passed.</p>
<h1 id="4-raising-exceptions">4. Raising Exceptions</h1>
<p>What happens when a user passes an incorrect number of arguments? Try giving your program too few arguments. Now try with too many arguments.</p>
<p>Our users might find it useful for us to <code>print</code> descriptive error messages if the number of arguments is incorrect. How could we add this to our progam?</p>
<h2 id="41-invalid-number-of-arguments">4.1 Invalid number of arguments</h2>
<p>We could do something like this:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Not enough arguments!&quot;</span>
</pre></div>


<p>Using <code>print</code> statements to indicate that an invalid number of arguments were passed is sufficient for now, but will make writing tests difficult.</p>
<p>For example, let's say we wanted to test that running our program with the command</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create
</pre></div>


<p>(which is missing an argument for the phonebook name) caused an error. How would we do that? Well, we could manually type in the command and observe the results. But would we want to do that with every command variation? And for too many arguments as well as too few? That quickly becomes too many things to remember to test manually.</p>
<p>Thankfully, testing frameworks like Python's <code>unittest</code> provide methods that test whether code <code>raise</code>s a specific exception. We'll cover more on testing and using <code>unittest</code> in the next chapter.</p>
<p>To make writing tests easier, we can define a custom exception that we'll call <code>ArgumentError</code>. To do this we just need to subclass it from the built-in <code>Exception</code> class:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ArgumentError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>


<p>Subclassing isn't particularly important to understand for this exercise, but is definitely important to understand in other contexts. I won't cover it here.</p>
<p>Now to <code>raise</code> this exception when an invalid number of arguments is passed:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ArgumentError</span><span class="p">(</span><span class="s">&quot;Not enough arguments!&quot;</span><span class="p">)</span>
</pre></div>


<p>Now see what happens when you run:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create
</pre></div>


<p>You should see an error message like this:</p>
<div class="highlight"><pre><span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;phonebook.py&quot;</span>, line <span class="m">25</span>, in <span class="n">&lt;module&gt;</span>
    <span class="k">raise</span> <span class="n">ArgumentError</span><span class="p">(</span><span class="s">&quot;Not enough arguments!&quot;</span><span class="p">)</span>
<span class="gr">__main__.ArgumentError</span>: <span class="n">Not enough arguments!</span>
</pre></div>


<p>Try <code>raise</code>ing our <code>ArgumentError</code> exception any time a user enters too few or too many arguments.</p>
<p>We should also <code>raise</code> an exception if the phone number passed as an argument isn't valid, but we'll do that later when we talk about partial string matching.</p>
<h1 id="5-writing-tests">5. Writing Tests</h1>
<h1 id="6-data-storage">6. Data Storage</h1>
<h1 id="7-partial-string-matching">7. Partial String Matching</h1>
<h2 id="71-string-methods">7.1 <code>string</code> Methods</h2>
<h4 id="711-matching-partial-names">7.1.1 Matching Partial Names</h4>
<h4 id="712-validating-phone-numbers">7.1.2 Validating Phone Numbers</h4>
<h2 id="72-regular-expressions">*7.2 Regular Expressions</h2>
<h4 id="721-matching-partial-names">*7.2.1 Matching Partial Names</h4>
<h4 id="722-validating-phone-numbers">*7.2.2 Validating Phone Numbers</h4>
<h1 id="8-further-reading">8. Further Reading</h1>
<h1 id="appendix">Appendix</h1>
<h2 id="subclasses-possible">Subclasses (possible)</h2>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li>The <code>argparse</code> module</li>
</ul>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-48330831-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
<script type="text/javascript">
    var disqus_shortname = 'mathamy';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>