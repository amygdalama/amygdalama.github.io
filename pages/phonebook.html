<!DOCTYPE html>
<html lang="en">
<head>
        <title>Phonebook Exercise</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
   

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="..">Amy Hanlon </a></h1>
                <nav><ul>
                    <li><a href="..">Home</a></li>
                    <li><a href="../pages/about.html">About</a></li>
                    <li><a href="../pages/contact.html">Contact</a></li>
                    <li><a href="../pages/projects.html">Projects</a></li>
                    <li><a href="../pages/talks.html">Talks</a></li>
                </ul></nav>

        </header><!-- /#banner -->
        
<section id="content" class="body">    
    <h1 class="page-title">Phonebook Exercise</h1>
    <p><a name="top"></a>
Let's make a command line tool for managing phonebook entries!</p>
<h1 id="introduction">Introduction</h1>
<p>This exercise is organized in a few sections:</p>
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#1-specifications">1. Specifications</a></li>
<li><a href="#2-code-skeleton">2. Code Skeleton</a></li>
<li><a href="#3-argument-parsing">3. Argument parsing</a><ul>
<li><a href="#31-accessing-arguments">3.1 Accessing Arguments</a></li>
<li><a href="#32-parsing-arguments">3.2 Parsing Arguments</a></li>
<li><a href="#33-unpacking-arguments">3.3 Unpacking Arguments</a></li>
<li><a href="#34-handling-bad-arguments">3.4 Handling Bad Arguments</a></li>
<li><a href="#35-more-ideas">*3.5 More Ideas</a></li>
</ul>
</li>
<li><a href="#4-data-storage">4. Data Storage</a><ul>
<li><a href="#41-creating-a-phonebook">4.1 Creating a Phonebook</a></li>
<li><a href="#42-adding-an-entry">4.2 Adding an Entry</a></li>
<li><a href="#43-looking-up-an-entry-by-name">4.3 Looking up an Entry by Name</a></li>
<li><a href="#44-other-functionality">4.4 Other Functionality</a></li>
<li><a href="#45-more-ideas">*4.5 More Ideas</a></li>
</ul>
</li>
<li><a href="#5-writing-tests">5. Writing Tests</a><ul>
<li><a href="#51-a-basic-test">5.1 A Basic Test</a></li>
<li><a href="#52-a-testspy-script">5.2 A tests.py Script</a></li>
<li><a href="#53-testing-bad-input">5.3 Testing Bad Input</a></li>
<li><a href="#54-testing-with-the-unittest-module">*5.4 Testing with the unittest Module</a></li>
</ul>
</li>
<li><a href="#further-reading">Further Reading</a><ul>
<li><a href="#helpful-modules-and-resources">Helpful Modules and Resources</a></li>
<li><a href="#the-__name__-variable">The __name__ Variable</a></li>
<li><a href="#mapping-commands-to-functions">Mapping commands to functions</a></li>
</ul>
</li>
</ul>
</div>
<p>Depending on your learning style and experience level, you might get through all of these sections. Or you might just get through the first one. That's okay! The main priority for this exercise is to write a lot of code and understand what the code you're writing does. Don't worry about "finishing", whatever that means.</p>
<p>If you don't understand a phrase or a line of code that I use, ask me! I can show you what I'd do to figure out what the line of code means. Learning how to figure out the things you don't know is an important skill in programming.</p>
<p>The more challenging sections are marked with an asterisk (*). If you find the sections without askerisks challenging, I recommend skipping the more challenging ones for now. You can come back to them later if you're curious.</p>
<p>On the other hand, if you have a good idea for how to do the things outlined in a section, try doing it without reading through the section first, and just use the tutorial for reference if you get stuck.</p>
<p>At the end of some sections I have links to additional resources if you'd like to implement a more advanced command line tool.</p>
<p>If you'd like to see what my code looks like when I worked through this exercise, I have snapshots of my <code>phonebook.py</code> file for each section <a href="https://github.com/amygdalama/phonebook-tutorial">on GitHub</a>.</p>
<h1 id="1-specifications">1. Specifications</h1>
<p>We'll write a Python program that will support creating, retrieving, updating, and deleting phonebook entries consisting of a name and a phone number.</p>
<p>The program will have a command line interface supporting the following commands and behaviors:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create ex_phonebook
<span class="go">Created phonebook &#39;ex_phonebook.pb&#39; in the current directory.</span>

<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;432 123 4321&#39;</span> ex_phonebook
<span class="go">Added an entry to ex_phonebook.pb:</span>
<span class="go">Jane Doe    432 123 4321</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;509 123 4567&#39;</span> ex_phonebook
<span class="go">Added an entry to ex_phonebook.pb:</span>
<span class="go">Jane Lin    509 123 4567</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Error: Jane Lin already exists in ex_phonebook. Use the &#39;update&#39; command to change this entry.</span>

<span class="gp">$</span> python phonebook.py update <span class="s1">&#39;Jane Lin&#39;</span> <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Updated an entry in ex_phonebook.pb.</span>
<span class="go">Previous entry:</span>
<span class="go">Jane Lin    509 123 4567</span>
<span class="go">New entry:</span>
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane&#39;</span> ex_phonebook
<span class="go">Jane Doe    432 123 4321</span>
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py reverse-lookup <span class="s1">&#39;643 357 9876&#39;</span> ex_phonebook
<span class="go">Jane Lin    643 357 9876</span>

<span class="gp">$</span> python phonebook.py remove <span class="s1">&#39;Jane Doe&#39;</span> ex_phonebook
<span class="go">Removed an entry from ex_phonebook.pb:</span>
<span class="go">Jane Doe    432 123 4321</span>
<span class="gp">$</span> python phonebook.py remove <span class="s1">&#39;John Doe&#39;</span> ex_phonebook
<span class="go">Error: &#39;John Doe&#39; does not exist in ex_phonebook.pb</span>
</pre></div>


<p><a href="#top">Back to top</a></p>
<h1 id="2-code-skeleton">2. Code Skeleton</h1>
<p>What are the functions that you'll need for your program? What arguments will each of those functions need? Write a skeleton program that has those functions definitions, but where the functions just <code>pass</code>, rather than actually doing anything.</p>
<p>Here is an example skeleton program with function definitions for <code>create</code>ing a phonebook and <code>add</code>ing an entry to the phonebook. You'll need more functions, too, but this is a start:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>


<p>Similarly, create functions for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<p>Wondering what the <code>if __name__ == '__main__'</code> code block is for? It's where you put code that you want to execute when you run this Python script directly, but not when you <code>import</code> this script into another one. More information on what that means can be found in the <a href="#__name__">Further Reading</a> section.</p>
<p><a href="#top">Back to top</a></p>
<h1 id="3-argument-parsing">3. Argument parsing</h1>
<h2 id="31-accessing-arguments">3.1 Accessing Arguments</h2>
<p>Arguments passed to Python scripts from the command line are accessible using the <code>sys</code> module. Here's a simple example script that prints out the arguments passed to the Python interpreter:</p>
<div class="highlight"><pre><span class="c"># ex.py</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">print</span> <span class="s">&quot;The arguments given to the interpreter are:&quot;</span>
<span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
</pre></div>


<p>What happens when you execute the script giving it some arguments?</p>
<div class="highlight"><pre><span class="gp">$</span> python ex.py cats dragons frogs
<span class="go">The arguments given to the interpreter are:</span>
<span class="go">[&#39;ex.py&#39;, &#39;cats&#39;, &#39;dragons&#39;, &#39;frogs&#39;]</span>
</pre></div>


<p>So <code>sys.argv</code> is a list, containing the name of the script (<code>'ex.py'</code>), and then the three arguments we passed, all represented as strings.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="32-parsing-arguments">3.2 Parsing Arguments</h2>
<p>For your phonebook application, you might choose to manually parse your arguments. This code should go in an <code>if __name__ == '__main__'</code> code block because parsing arguments doesn't make sense when you're <code>import</code>ing a module.</p>
<p>For the first two commands, <code>create</code> and <code>add</code>, your code would look something like this:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="c"># include functions for other commands</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[:]</span>      <span class="c"># make a copy</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    <span class="c"># name of script is first arg</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># the next arg will be the main command</span>

    <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;add&#39;</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">)</span>
</pre></div>


<p>Similarly, define <code>elif</code> statements for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<p>If you're not sure how the <code>pop</code> method works, google it, and play around with it in your REPL! Some questions you can try to figure out:</p>
<ol>
<li>What happens if you don't give <code>pop</code> an argument?</li>
<li>What does the comment "make a copy" mean? What happens if you don't make a copy?</li>
</ol>
<p><a href="#top">Back to top</a></p>
<h2 id="33-unpacking-arguments">3.3 Unpacking Arguments</h2>
<p>List unpacking can make our code naming the variables in each of the <code>if</code>/<code>elif</code> blocks much cleaner.</p>
<p>For example, we can turn this:</p>
<div class="highlight"><pre><span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">number</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>


<p>into this:</p>
<div class="highlight"><pre><span class="n">name</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="n">args</span>
</pre></div>


<p>This takes the first element in <code>args</code> and assigns it to the variable <code>name</code>, and the second element in <code>args</code> and assigns it to the variable <code>number</code>.</p>
<p>Edit the code for each of your commands to use list unpacking everywhere you have multiple lines with <code>pop</code> in a row.</p>
<p>An example for the <code>add</code> and <code>create</code> commands would look like this:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># create a new phonebook</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="c"># add a new name and number to the given phonebook</span>
    <span class="k">pass</span>


<span class="c"># include functions for other arguments</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[:]</span>      <span class="c"># make a copy</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    <span class="c"># name of script is first arg</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># the next arg will be the main command</span>

    <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;add&#39;</span><span class="p">:</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">)</span>
</pre></div>


<p>We left the <code>pop</code> line for the <code>create</code> command since there should be only one argument left. What happens if you try to unpack a list with only one element? Try figuring it out in your REPL.</p>
<p>Similarly, define <code>elif</code> statements for <code>update</code>, <code>lookup</code>, <code>reverse-lookup</code>, and <code>delete</code>.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="34-handling-bad-arguments">3.4 Handling Bad Arguments</h2>
<p>What happens if your program isn't given any arguments? Try:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;phonebook.py&quot;, line 69, in &lt;module&gt;</span>
<span class="go">    command = args.pop(0)   # the next arg will be the main command</span>
<span class="go">IndexError: pop from empty list</span>
</pre></div>


<p>What if it's given an argument that isn't supported?</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py cats
</pre></div>


<p>What about if you try <code>add</code>ing a phone number, but you only give it a name, and not a number?</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;phonebook.py&quot;, line 79, in &lt;module&gt;</span>
<span class="go">    name, number, phonebook_name = args</span>
<span class="go">ValueError: need more than 1 value to unpack</span>
</pre></div>


<p>What about if you give it a name, number, and an extra nonsensical argument?</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;765-344-3421&#39;</span> <span class="s1">&#39;cats&#39;</span>
</pre></div>


<p>It would be helpful to print out a more descriptive error message for these cases, rather than having Python print out a confusing message (or nothing at all).</p>
<p>For a start, we can add <code>print</code> statements and then <code>quit</code> when our program is given bad arguments:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[:]</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>    <span class="c"># name of script is first arg</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Not enough arguments&quot;</span>
        <span class="n">quit</span><span class="p">()</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># the next arg will be the main command</span>
</pre></div>


<p>Here, we take advantage of an empty list being <code>False</code>y. If there are no arguments left in <code>args</code> after we <code>pop</code> off the script name, <code>not args</code> will evaluate to <code>True</code>, and we'll <code>print</code> an error message and <code>quit</code>. Otherwise we can move on with our program.</p>
<p>Similarly, we can add a check that we're given the correct number of arguments for the <code>create</code> command:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Phonebook name required&quot;</span>
        <span class="n">quit</span><span class="p">()</span>
    <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>
</pre></div>


<p>Add similar checks for each of the commands. Make your program <code>print</code> error messages and <code>quit</code> any time:</p>
<ul>
<li>there aren't enough arguments</li>
<li>there are too many arguments</li>
<li>an argument given is invalid</li>
</ul>
<p>Doing checks based on the <code>len</code> of <code>args</code> is considered bad Python style. It's usually better to put code in <code>try</code>/<code>except</code> clauses. Similarly, when we write tests, we're going to want to <code>raise</code> exceptions rather than just <code>print</code>ing and <code>quit</code>ing. But for now, this will do.</p>
<p>Your program should now support the following:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py
<span class="go">Command required</span>
<span class="gp">$</span> python phonebook.py cats
<span class="go">Invalid command</span>
<span class="gp">$</span> python phonebook.py add
<span class="go">Name, number, and phonebook name required</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span>
<span class="go">Name, number, and phonebook name required</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;234-234-2334&#39;</span>
<span class="go">Name, number, and phonebook name required</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;234-234-2334&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;234-234-2334&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span> <span class="s1">&#39;cats&#39;</span>
<span class="go">Name, number, and phonebook name required</span>
</pre></div>


<p>Similarly, try giving the other commands (<code>update</code>, <code>remove</code>, <code>lookup</code>, and <code>reverse-lookup</code>) too few and too many arguments. You want to make sure that the behavior that you expect is what actually happens.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="35-more-ideas">*3.5 More Ideas</h2>
<p>If this section hasn't challenged you enough, here are some things you could work on that might be more interesting for you:</p>
<ul>
<li>Parse the commands using a module like <code>argparse</code></li>
<li><code>raise</code> exceptions instead of <code>print</code>ing error messages when the user gives bad input</li>
<li>Even better, <code>raise</code> exceptions <em>and</em> <code>print</code> human-readable, helpful error messages when the user gives bad input</li>
<li><a href="#map">Map the commands to functions using a dictionary!</a></li>
<li>Practice test-driven development! Try writing a test for what should happen for a possible input (good or bad), run the test and watch it fail, and then work on your code until the test passes. Then repeat.</li>
</ul>
<p><a href="#top">Back to top</a></p>
<h1 id="4-data-storage">4. Data Storage</h1>
<p>Now that we have a skeleton of functions for each of our commands, and we call the appropriate functions for each command with the appropriate arguments, we need to figure out how to store and access our phonebook entries. First we'll start with saving these entries to a file, and reading them into a dictionary data structure. A more advanced option would be to save the data in a database.</p>
<h2 id="41-creating-a-phonebook">4.1 Creating a Phonebook</h2>
<p>Let's work on the <code>create_phonebook</code> function. This function should create a new text file in the working directory.</p>
<p>We can create a file by <code>open</code>ing a file in write mode:</p>
<div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;filename.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
</pre></div>


<p>The <code>'w'</code> parameter designates write mode. There is also read mode and append mode, both of which we'll use later.</p>
<p>Any time you <code>open</code> a file you must remember to <code>close</code> it, or your changes won't be saved!</p>
<div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;filename.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>


<p>Since it's easy to forget to <code>close</code> a file, it's best practice to instead <code>open</code> files using the <code>with</code> statement:</p>
<div class="highlight"><pre><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;filename.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c"># do things with f</span>
    <span class="k">pass</span>
</pre></div>


<p><code>with</code> automatically <code>close</code>s the file for you, so you don't have to remember.</p>
<p>Let's use this to fill out our <code>create_phonebook</code> function, which should execute with the <code>create</code> command:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>


<p>The syntax <code>'%s.txt' % phonebook_name</code> is called string interpolation. The variable on the right side of the <code>%</code> gets substituted for the <code>%s</code> inside the string. This will create files with names like <code>phonebook.txt</code> or <code>ex_phonebook.txt</code>.</p>
<p>We just <code>pass</code> because we don't need to write anything to the file at this point.</p>
<p>Now let's see what happens when we use our program to <code>create</code> a phonebook:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="gp">$</span> ls
<span class="go">ex_phonebook.txt phonebook.py</span>
</pre></div>


<p>We should see that a file <code>ex_phonebook.txt</code> was created!</p>
<p>Let's say we manually added some entries into our <code>ex_phonebook.txt</code> file, and tried creating another phonebook with the same name? Would our data get overwritten? Or would Python throw an error? Let's see!</p>
<p>I'm manually typing some text into <code>ex_phonebook.txt</code> using my text editor:</p>
<div class="highlight"><pre>Jane Doe    123-123-1234
</pre></div>


<p>Now let's try <code>create</code>ing <code>ex_phonebook</code> again:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create <span class="s1">&#39;ex_phonebook&#39;</span>
</pre></div>


<p>And... oh no! The contents of <code>ex_phonebook.txt</code> have been deleted! We don't want our users to accidentally delete the entire contents of their phonebooks this way. Let's rewrite the <code>create_phonebook</code> function so that it won't overwrite any existing files.</p>
<p>To check if the file exists, we'll need to use the <code>os</code> module. Add this import statement to the top of your <code>phonebook.py</code> script:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
</pre></div>


<p>And then edit the <code>create_phonebook</code> function:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;That phonebook already exists!&quot;</span>
        <span class="n">quit</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>


<p>Now let's check that this works:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="go">That phonebook already exists!</span>
</pre></div>


<p>Sweet!</p>
<h2 id="42-adding-an-entry">4.2 Adding an Entry</h2>
<p>Now that we can <code>create</code> phonebooks, let's work on the <code>add_entry</code> function.</p>
<p>Recall that we should support adding an entry with the following command:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;234-234-2334&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
</pre></div>


<p>For now, adding an entry will mean adding a line to the phonebook.</p>
<p>To add a line to a file, we'll need to <code>open</code> the file in append mode:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>   <span class="c"># add newline</span>
</pre></div>


<p><code>'%s\t%s' % (name, number)</code> is another example of string interpolation. This will substitute the first item in the tuple after the <code>%</code> for the first <code>%s</code> and the second item in the tuple for the second <code>%s</code>. The <code>\t</code> in the middle is the symbol for a tab. So our entries will be stored in a tab-delimited format.</p>
<p>Let's try adding a couple entries:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py add <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;234-234-2334&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="gp">$</span> python phonebook.py add <span class="s1">&#39;John Doe&#39;</span> <span class="s1">&#39;789-234-4567&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
</pre></div>


<p>Now the <code>ex_phonebook.txt</code> file should look like:</p>
<div class="highlight"><pre>Jane Doe    234-234-2334
John Doe    789-234-4567
</pre></div>


<p>There are plenty of things we should do to make this <code>add_entry</code> function better, like</p>
<ul>
<li>check for duplicate entries</li>
<li>make sure the given phonebook name exists</li>
</ul>
<p>But for now let's move on. We can come back to these if we want.</p>
<h2 id="43-looking-up-an-entry-by-name">4.3 Looking up an Entry by Name</h2>
<p>Now, let's work on the <code>lookup_name</code> function. We want to read the contents of a phonebook file, and print out the matching entries, if there are any. There are so many ways to do this!</p>
<p>We'll need to <code>open</code> a file in read mode, and then iterate through each line of the file. We can do that with:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">lookup_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>      <span class="c"># &#39;r&#39; for read mode</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">line</span>
</pre></div>


<p>We'll first just try <code>print</code>ing the <code>line</code> to see what it looks like:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="go">Jane Doe    234-234-2334</span>

<span class="go">John Doe    789-234-4567</span>
</pre></div>


<p>Hmm. This doesn't give us much information. We can use the function <code>repr</code> to tell us the actual representation of the lines:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">lookup_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>            <span class="c"># use repr function</span>
</pre></div>


<p>After replacing this in our <code>phonebook.py</code> file, let's see what the <code>lookup_name</code> function prints:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="go">&#39;Jane Doe\t234-234-2334\n&#39;</span>
<span class="go">&#39;John Doe\t789-234-4567\n&#39;</span>
</pre></div>


<p>Okay! That is more illuminating. So for each line, we have a string containing the name, followed by a tab (<code>\t</code>), followed by the number, followed by a newline (<code>\n</code>).</p>
<p>We need to somehow extract the names from each of these lines so we can compare it to the name we're looking up.</p>
<p>Python has some helpful string methods that we can use here. <code>rstrip</code> removes trailing whitespace from a string (<code>\n</code> counts as whitespace), and <code>split</code> breaks up a string into a list based on the characters of your choosing.</p>
<p>So, for each of these lines, let's <code>strip</code> off the whitespace, and <code>split</code> the string into a list on the <code>\t</code> character:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">lookup_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>      <span class="c"># use string methods</span>
</pre></div>


<p>This will <code>print</code> the results:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="go">[&#39;Jane Doe&#39;, &#39;234-234-2334&#39;]</span>
<span class="go">[&#39;John Doe&#39;, &#39;789-234-4567&#39;]</span>
</pre></div>


<p>Great! Now we need to see if the name of the entry is the same as the name we're looking up, and only <code>print</code> the names that match:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">lookup_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">phonebook_name</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">.txt&#39;</span> <span class="o">%</span> <span class="n">phonebook_name</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">entry_name</span><span class="p">,</span> <span class="n">entry_number</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">entry_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">entry_name</span><span class="p">,</span> <span class="n">entry_number</span>
</pre></div>


<p>Now when we run our program:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane Doe&#39;</span> <span class="s1">&#39;ex_phonebook&#39;</span>
<span class="go">Jane Doe 234-234-2334</span>
</pre></div>


<p>Great! Now it only prints matches. When we write tests for this function, we'll want to <code>return</code> the matches, rather than just <code>print</code>ing them, but for now this will do.</p>
<h2 id="44-other-functionality">4.4 Other Functionality</h2>
<p>Now we can create phonebooks, add entries, and look up existing entries by name. How could we remove a name? Update a name? Look up a name by phone number? Try writing these functions on your own.</p>
<p>I'll give you a hint: deleting a line from a file isn't very straightforward. Instead, you'll need to save the lines you want to keep in a list, remove the old contents of the file by opening it in write mode, and then write the lines you saved in the list to the file.</p>
<h2 id="45-more-ideas">*4.5 More Ideas</h2>
<p>If this section hasn't challenged you enough, here are some things you could work on that might be more interesting for you:</p>
<ul>
<li>
<p>Enable partial string matching using either string methods or regular expressions (using the <code>re</code> module). i.e. make this work:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py lookup <span class="s1">&#39;Jane&#39;</span> ex_phonebook
<span class="go">Jane Doe    432 123 4321</span>
<span class="go">Jane Lin    643 357 9876</span>
</pre></div>


</li>
<li>
<p>Store the phonebook entries in a database! Some common Python modules that help you interact with databases are <code>sqlite3</code> and <code>sqlalchemy</code>.</p>
</li>
<li>Store the phonebook entries as dictionaries using the <code>pickle</code> module!</li>
</ul>
<h1 id="5-writing-tests">5. Writing Tests</h1>
<p>This part isn't finished yet! If you get to this point, let me know, and I can do a demo!</p>
<h2 id="51-a-basic-test">5.1 A Basic Test</h2>
<h2 id="52-a-testspy-script">5.2 A <code>tests.py</code> Script</h2>
<h2 id="53-testing-bad-input">5.3 Testing Bad Input</h2>
<p>Let's say we wanted to test that running our program with the command</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create
</pre></div>


<p>(which is missing an argument for the phonebook name) causes an error. How would we do that? Well, we could manually type in the command and observe the results. But would we want to do that with every command variation? And for too many arguments as well as too few? That quickly becomes too many things to remember to test manually.</p>
<p>Thankfully, testing frameworks like Python's <code>unittest</code> provide methods that test whether code <code>raise</code>s a specific exception.</p>
<p>To make writing tests easier, we can define a custom exception that we'll call <code>ArgumentError</code>. To do this we just need to subclass it from the built-in <code>Exception</code> class:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ArgumentError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>


<p>Subclassing and class inheritance is out of scope for this exercise, but it's really interesting! I definitely recommend reading about it and playing around with it.</p>
<p>Now to <code>raise</code> this exception when an invalid number of arguments is passed:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">&#39;create&#39;</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">phonebook_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">create_phonebook</span><span class="p">(</span><span class="n">phonebook_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ArgumentError</span><span class="p">(</span><span class="s">&quot;Not enough arguments!&quot;</span><span class="p">)</span>
</pre></div>


<p>Now see what happens when you run:</p>
<div class="highlight"><pre><span class="gp">$</span> python phonebook.py create
</pre></div>


<p>You should see an error message like this:</p>
<div class="highlight"><pre><span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;phonebook.py&quot;</span>, line <span class="m">25</span>, in <span class="n">&lt;module&gt;</span>
    <span class="k">raise</span> <span class="n">ArgumentError</span><span class="p">(</span><span class="s">&quot;Not enough arguments!&quot;</span><span class="p">)</span>
<span class="gr">__main__.ArgumentError</span>: <span class="n">Not enough arguments!</span>
</pre></div>


<p>Try <code>raise</code>ing our <code>ArgumentError</code> exception any time a user enters too few or too many arguments.</p>
<p>We should also <code>raise</code> an exception if the phone number passed as an argument isn't valid, but we'll do that later when we talk about partial string matching.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="54-testing-with-the-unittest-module">*5.4 Testing with the <code>unittest</code> Module</h2>
<h1 id="further-reading">Further Reading</h1>
<h2 id="helpful-modules-and-resources">Helpful Modules and Resources</h2>
<ul>
<li>The <a href="https://docs.python.org/dev/library/argparse.html"><code>argparse</code> module</a> for building a powerful command line argument parser</li>
<li>The <a href="https://docs.python.org/2/library/re.html"><code>re</code> module</a> for Regular Expressions</li>
<li><a href="http://www.diveintopython3.net/">Dive Into Python</a> for generally learning about Python</li>
</ul>
<p><a name="__name__"></a></p>
<h2 id="the-__name__-variable">The <code>__name__</code> Variable</h2>
<p>What does <code>if __name__ == '__main__':</code> do, and why do I have it in my program?</p>
<p>Suppose someone (maybe you) wanted to <code>import</code> this <code>phonebook.py</code> script into another program. Maybe you want to do this so you could write tests for the program (which we'll cover later), or because you wanted to make a web front-end to the program. You would probably want some code that executes only if the script is executed directly (e.g. by calling <code>python phonebook.py</code> on the command line) that is <em>not</em> executed when you <code>import</code> the script into another Python program.</p>
<p>This is exactly what the <code>if __name__ == '__main__'</code> code block is for. <code>__name__</code> is a variable whose value will be <code>__main__</code> if the script was executed directly (e.g. by <code>python phonebook.py</code>) and otherwise will be the name of the module, (e.g. <code>phonebook</code>).</p>
<p>To make this a bit more concrete, let's make some example scripts:</p>
<p>First <code>a.py</code>:</p>
<div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;__name__: &quot;</span><span class="p">,</span> <span class="n">__name__</span>
</pre></div>


<p>What happens when we execute <code>a.py</code>?</p>
<div class="highlight"><pre><span class="gp">$</span> python a.py
<span class="go">__name__:  __main__</span>
</pre></div>


<p><code>a.py</code> is fairly straightforward -- we execute the <code>print</code> statement, and we see that the value of the variable <code>__name__</code> is the string <code>'__main__'</code>. <code>__name__</code> is a variable that is defined for us automatically in every Python program, and if the program was executed directly, its value is the string <code>'__main__'</code>. Great.</p>
<p>Let's define a second script, <code>b.py</code>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">a</span>
</pre></div>


<p>And execute <code>b.py</code>:</p>
<div class="highlight"><pre><span class="gp">$</span> python b.py
<span class="go">__name__:  a</span>
</pre></div>


<p><code>b.py</code> is a bit less straightforward. Here we <code>import a</code>, which <em>executes the code that is inside <code>a.py</code></em>. I'll give a basic overview of what <code>import</code> does in a later section.</p>
<p>So the value of <code>__name__</code> inside <code>a</code> in this context is the string <code>'a'</code>, rather than <code>'__main__'</code>. This is because the code is being executed by result of an <code>import</code> statement, rather than being executed directly.</p>
<p>How could we execute different code when we <code>import</code> a script than when we execute the script directly? This is where the <code>if __name__ == '__main__'</code> part comes into play. Let's make two more example scripts to explore this.</p>
<p><code>c.py</code>:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;c.py was executed directly&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;c.py was imported&quot;</span>
</pre></div>


<p><code>d.py</code>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">c</span>
</pre></div>


<p>And let's execute each of these scripts to see what happens:</p>
<div class="highlight"><pre><span class="gp">$</span> python c.py
<span class="go">c.py was executed directly</span>

<span class="gp">$</span> python d.py
<span class="go">c.py was imported</span>
</pre></div>


<p>Viola! So that's what the <code>if __name__ == '__main__'</code> statement does. We'll be adding some code that we don't want to execute when we <code>import phonebook</code> into this code block.</p>
<p><a href="#top">Back to top</a></p>
<p><a name="map"></a></p>
<h2 id="mapping-commands-to-functions">Mapping commands to functions</h2>
<p>Having an <code>if</code>/<code>elif</code> statement for each of our commands is kind of ugly. Instead, try creating a dictionary mapping the commands to their corresponding functions, like this:</p>
<div class="highlight"><pre><span class="n">command_funcs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;create&#39;</span> <span class="p">:</span> <span class="n">create</span><span class="p">,</span>  <span class="c"># create is a function defined elsewhere</span>
    <span class="s">&#39;add&#39;</span> <span class="p">:</span> <span class="n">add</span><span class="p">,</span>
    <span class="s">&#39;update&#39;</span> <span class="p">:</span> <span class="n">update</span><span class="p">,</span>
    <span class="s">&#39;delete&#39;</span> <span class="p">:</span> <span class="n">delete</span><span class="p">,</span>
    <span class="s">&#39;lookup&#39;</span> <span class="p">:</span> <span class="n">lookup</span><span class="p">,</span>
    <span class="s">&#39;reverse-lookup&#39;</span> <span class="p">:</span> <span class="n">reverse_lookup</span>
<span class="p">}</span>
</pre></div>


<p>Having functions as values in a dictionary might be pretty foreign at first, but it can be really useful, as we're about to see!</p>
<p>We can look up the appropriate function for the given command like this:</p>
<div class="highlight"><pre><span class="n">func</span> <span class="o">=</span> <span class="n">command_funcs</span><span class="p">[</span><span class="n">command</span><span class="p">]</span>
</pre></div>


<p>Here the variable <code>command</code> is the main command you grabbed from the command line arguments. <code>func</code> is the function associated with <code>command</code> in the <code>command_funcs</code> dictionary we created.</p>
<p>To invoke <code>func</code>, we could try:</p>
<div class="highlight"><pre><span class="n">func</span><span class="p">()</span>
</pre></div>


<p>But we need to figure out how to pass the appropriate arguments to <code>func</code>. <code>func</code> could be any of <code>create</code>, <code>add</code>, <code>update</code>, <code>delete</code>, etc. These functions take varying number of arguments. So how can we pass the correct number of arguments to <code>func</code> without a messy <code>if</code> statement?</p>
<p>This is where the super awesome <code>*args</code> comes in handy. Try reading up on <code>*args</code>. Then try figuring out how to use it to pass <code>func</code> the rest of the arguments that were given on the command line. Try to figure out how to handle when an incorrect number of arguments is passed.</p>
<p><a href="#top">Back to top</a></p>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-48330831-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
<script type="text/javascript">
    var disqus_shortname = 'mathamy';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>